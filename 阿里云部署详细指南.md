# 阿里云部署详细指南

## 🛒 第一步：购买阿里云ECS服务器

### 1.1 登录阿里云控制台
- 访问：https://ecs.console.aliyun.com/
- 使用阿里云账号登录

### 1.2 创建ECS实例
点击"创建实例"，按以下配置：

#### 基础配置
- **付费方式**：包年包月（推荐）或按量付费
- **地域**：选择离用户最近的地域（如：华东1-杭州）
- **实例规格**：
  - 推荐：2核4GB内存
  - 最低：1核2GB内存
  - 系列：共享型s6

#### 镜像配置
- **镜像类型**：公共镜像
- **操作系统**：Ubuntu 20.04 LTS
- **架构**：x86_64

#### 存储配置
- **系统盘**：40GB ESSD云盘
- **数据盘**：可选（如需要）

#### 网络配置
- **专有网络**：默认VPC
- **交换机**：默认交换机
- **公网IP**：分配公网IP地址
- **带宽计费方式**：按固定带宽
- **带宽值**：5Mbps（足够静态网站使用）

#### 安全组配置
- **安全组**：创建安全组
- **端口范围**：22/22（SSH）
- **授权对象**：0.0.0.0/0

### 1.3 设置密码
- **登录凭证**：自定义密码
- **实例名称**：aoyingliuxue-website
- **主机名**：aoyingliuxue

### 1.4 确认订单
- 检查配置无误后点击"创建实例"
- 等待实例创建完成（约1-2分钟）

## 🔧 第二步：配置安全组

### 2.1 开放必要端口
在ECS控制台中找到您的实例，点击"安全组"：

1. **SSH端口（22）**：已开放
2. **HTTP端口（80）**：需要添加
   - 端口范围：80/80
   - 授权对象：0.0.0.0/0
3. **HTTPS端口（443）**：需要添加
   - 端口范围：443/443
   - 授权对象：0.0.0.0/0

## 🌐 第三步：购买域名（可选）

### 3.1 域名购买
- 访问：https://wanwang.aliyun.com/
- 搜索并购买域名（如：aoyingliuxue.com）
- 推荐域名后缀：.com, .cn, .net

### 3.2 域名解析配置
1. 进入域名控制台
2. 找到购买的域名，点击"解析设置"
3. 添加解析记录：
   - **记录类型**：A
   - **主机记录**：@
   - **解析线路**：默认
   - **记录值**：您的ECS公网IP
   - **TTL**：600

## 🚀 第四步：服务器配置

### 4.1 连接服务器
```bash
# 使用SSH连接服务器
ssh root@您的服务器公网IP

# 首次连接会提示确认，输入yes
```

### 4.2 上传配置脚本
```bash
# 在本地执行（替换为您的服务器IP）
scp server-setup.sh root@您的服务器IP:/root/
```

### 4.3 运行配置脚本
```bash
# 在服务器上执行
chmod +x server-setup.sh
bash server-setup.sh
```

## 📤 第五步：部署网站

### 5.1 上传网站文件
```bash
# 在本地执行（替换为您的服务器IP）
bash upload-website.sh 您的服务器IP
```

### 5.2 验证部署
```bash
# 在浏览器中访问
http://您的服务器IP
```

## 🔒 第六步：配置SSL证书

### 6.1 申请Let's Encrypt证书
```bash
# 在服务器上执行（替换为您的域名）
certbot --nginx -d aoyingliuxue.com -d www.aoyingliuxue.com
```

### 6.2 自动续期设置
```bash
# 测试自动续期
certbot renew --dry-run

# 添加到定时任务
crontab -e
# 添加以下行：
# 0 12 * * * /usr/bin/certbot renew --quiet
```

## 📊 第七步：性能优化

### 7.1 启用CDN（可选）
1. 在阿里云控制台购买CDN服务
2. 添加加速域名
3. 配置源站为您的ECS服务器IP
4. 更新域名解析到CDN

### 7.2 监控设置
1. 在ECS控制台启用云监控
2. 设置告警规则
3. 监控CPU、内存、带宽使用情况

## 🔍 第八步：测试验证

### 8.1 功能测试
- [ ] 网站首页正常加载
- [ ] 响应式设计正常
- [ ] 表单提交功能
- [ ] 图片和资源加载
- [ ] 导航链接正常

### 8.2 性能测试
- [ ] 页面加载速度 < 3秒
- [ ] HTTPS证书正常
- [ ] 移动端访问正常
- [ ] 搜索引擎收录正常

### 8.3 安全测试
- [ ] 防火墙配置正确
- [ ] 敏感信息无泄露
- [ ] 表单安全验证
- [ ] 定期安全更新

## 💰 成本估算

### 月度成本（包年包月）
- **ECS服务器**：约100-200元/月
- **域名**：约50-100元/年
- **CDN**：约20-50元/月（可选）
- **总计**：约120-250元/月

### 年度成本
- **总计**：约1440-3000元/年

## 🛠️ 故障排除

### 常见问题

#### 1. 无法SSH连接
- 检查安全组是否开放22端口
- 确认服务器状态为"运行中"
- 检查网络连接

#### 2. 网站无法访问
- 检查Nginx服务状态：`systemctl status nginx`
- 检查防火墙设置：`ufw status`
- 查看Nginx错误日志：`tail -f /var/log/nginx/error.log`

#### 3. SSL证书问题
- 确认域名解析正确
- 检查80端口是否开放
- 重新申请证书：`certbot --nginx -d 域名`

#### 4. 性能问题
- 检查服务器资源使用：`htop`
- 优化图片大小
- 启用CDN加速

## 📞 技术支持

### 阿里云支持
- **工单系统**：https://workorder.console.aliyun.com/
- **在线客服**：阿里云控制台右下角
- **电话支持**：400-955-9888

### 文档资源
- **ECS文档**：https://help.aliyun.com/product/25484.html
- **Nginx配置**：https://nginx.org/en/docs/
- **SSL证书**：https://letsencrypt.org/docs/

---

*最后更新：2024年*
*如有问题，请参考阿里云官方文档或联系技术支持* 